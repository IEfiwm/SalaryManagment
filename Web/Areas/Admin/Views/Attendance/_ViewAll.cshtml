@using Common.Models.DataTable
@model DataTableViewModel<IEnumerable<Web.Areas.Admin.Models.AttendanceViewModel>>
@inject IHtmlLocalizer<SharedResource> localizer
<div class="card-body table-responsive">
    <table class="table table-striped" id="attendanceTable">
        <thead>
            <tr>
                <th>
                    کد پ
                </th>
                <th>
                    نام‌و‌نام‌خانوادگی
                </th>
                <th>
                    نام‌پدر
                </th>
                <th>
                    کد ملی
                </th>
                <th>
                    شماره‌بیمه
                </th>
                <th>
                    شماره‌شناسنامه
                </th>
                <th>
                    تاریخ تولد
                </th>
                <th>
                    نام‌شعبه
                </th>
                <th>
                    سال
                </th>
                <th>
                    ماه
                </th>
                <th>
                    تعداد‌اولاد
                </th>
                <th>
                    شماره حساب
                </th>
                <th data-toggle="tooltip" data-placement="top" title="بیمه تامین اجتماعی">
                    بیمه‌...
                </th>
                <th>
                    جمع‌كسور
                </th>
                <th>
                    كل‌حقوق‌و‌مزايا
                </th>
                <th>
                    اضافه‌کاری
                </th>
                <th>
                    بن‌کارگری
                </th>
                <th>
                    پایه‌سنوات
                </th>
                <th>
                    تعطیل‌کاری
                </th>
                <th>
                    حق‌اولاد
                </th>
                <th>
                    1حق‌ناهار
                </th>
                <th>
                    حق‌مسکن
                </th>
                <th>
                    حقوق‌پایه
                </th>
                <th>
                    خالص‌پرداختی
                </th>
                <th>
                    سایر‌کسور
                </th>
                <th>
                    شبکاری
                </th>
                <th data-toggle="tooltip" data-placement="top" title="کارکرد اضافه کاری">
                    کارکرد اض...
                </th>
                <th data-toggle="tooltip" data-placement="top" title="کارکرد تعطیل کاری">
                    کارکرد تع...
                </th>
                <th data-toggle="tooltip" data-placement="top" title="كاركرد حق‌غذا">
                    کارکرد ح...
                </th>
                <th>
                    کارکرد‌موثر
                </th>
                <th>
                    کارکرد‌شبکاری
                </th>
                <th>
                    ماليات
                </th>
                <th>
                    کارکرد‌ماموریت
                </th>
                <th>
                    ماموریت
                </th>
                <th data-toggle="tooltip" data-placement="top" title="کارکرد نوبت کاری">
                    کارکرد نو...
                </th>
                <th>
                    نوبت‌کاری
                </th>
                <th>
                    کسر‌بیمه‌تکمیلی
                </th>
                <th>
                    کارکرد‌پاداش
                </th>
                <th>
                    پاداش
                </th>
                <th>
                    سنوات
                </th>
                <th>
                    عیدی
                </th>
                <th data-toggle="tooltip" data-placement="top" title="اضافه کاری ثابت">
                    اضافه کا...
                </th>
                <th data-toggle="tooltip" data-placement="top" title="کسر بیمه تکمیلی سرپرست">
                    کسر‌...
                </th>
                <th data-toggle="tooltip" data-placement="top" title="کسر بیمه تکمیلی افراد تحت تکفل">
                    کسر‌...
                </th>
                <th data-toggle="tooltip" data-placement="top" title="کسر بیمه تکمیلی افرادغیر تحت تکفل">
                    کسر‌...
                </th>
                <th>
                    هزینه‌رفاهی
                </th>
                <th>
                    ایاب‌و‌ذهاب
                </th>
                <th>
                    کارکرد‌معوقه
                </th>
                <th>
                    وام‌موسسه
                </th>
                <th>
                    وام‌سامان
                </th>
                <th>
                    معوقه‌ایاب‌و‌ذهاب
                </th>
                <th data-toggle="tooltip" data-placement="top" title="کسر بیمه تکمیلی ماه معوقه">
                    کسر‌...
                </th>
                <th data-toggle="tooltip" data-placement="top" title=" کمک هزینه رفاهی">
                    کمک‌...
                </th>
                <th>
                    کارایی
                </th>
                <th>
                    رند‌حقوق
                </th>
                <th>
                    حق‌شیر
                </th>
                <th>
                    حق‌خواربار
                </th>
                <th>
                    مانده‌مرخصی
                </th>
                <th>
                    جمع‌اقساط‌وام
                </th>
                <th>
                    جمع‌مزایا
                </th>
                <th>
                    شغل
                </th>
                <th>
                    مزد‌روزانه
                </th>
                <th>
                    کدشغل
                </th>
                <th>
                    جنسیت
                </th>
                <th>
                    ملیت
                </th>
                <th>
                    ماخذ‌بیمه
                </th>
                <th>
                    مزایای‌مشمول
                </th>
                <th>
                    شروع‌کار
                </th>
                <th>
                    ترک‌کار
                </th>
                <th data-toggle="tooltip" data-placement="top" title="دستمزد و مزایای مشمول ماهانه">
                    دستمزد
                </th>
                <th>
                    مشمول‌و‌غیرمشمول
                </th>
                <th>
                    حق‌بیمه‌سهم‌کارفرما
                </th>
                <th>
                    حق‌بیمه‌بیکاری
                </th>
                <th>
                    محل‌تولد
                </th>
                <th data-toggle="tooltip" data-placement="top" title=" جمع کل حق‌بیمه اعم از حق‌بیمه و بیمه بیکاری">
                    جمع‌کل...
                </th>
                <th style="width:10%">
                    #
                </th>
            </tr>
        </thead>
        <tbody>
            @foreach (var attendance in Model.ViewModel)
            {
                <tr>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                <a>
                                    @attendance.PersonnelCode
                                </a>
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                <a>
                                    @attendance.FirstName @attendance.LastName
                                </a>
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                <a>
                                    @attendance.FatherName
                                </a>
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                <a>
                                    @attendance.NationalCode
                                </a>
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                <a>
                                    @attendance.InsuranceNumber
                                </a>
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.IdentityNumber
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.Birthday?.ToString("yyyy/MM/dd")
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.ServiceLocation
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.Year
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.Month
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.NumberChildren
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.AccountNumber
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.Insurance7Percent
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.SumDeductions
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.SumSalaryAndBenefit
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.OvertimeworkingPay
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.WorkerRightPay
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.SeveranceMonthly
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.HolidayworkingPay
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.ChildrenRightPay
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.FoodPay
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.HouseRightPay
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.MonthlyPay
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.PureIncome
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.OtherDeductions
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.NightworkingPay
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.OvertimeworkingTime
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.HolidayworkingTime
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.FoodTime
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.DurationOperation
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.NightworkingTime
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.Taxation
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.MissionTime
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.MissionPay
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.ShiftWorkTime
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.ShiftWorkPay
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.SupplementaryInsuranceDeduction
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.RewardTime
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.RewardPay
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.YearsPay
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.FestalPay
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.BasicOverTimePay
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.SupplementaryInsuranceSupervisor
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.SupplementaryInsuranceForDependents
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.NonDependentSupplementaryInsurance
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.WelfareCostPay
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.TransportationPay
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.DelayedTime
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.InstitutionaLoan
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.SamanLoan
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.DelayedTransportationPay
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.DelayedSupplementaryInsuranceDeduction
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.WelfareAllowancePay
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.PerformancePay
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.RoundedSalary
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.FeedRightPay
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.FoodStuffRightPay
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.LeaveBalance
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.TotalLoanInstallments
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.SumSalaryAndBenefit
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.JobTitle
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.DailyPay
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.JobCode
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @Common.Extentions.CommonExtention.GetEnumDisplayName(attendance.Gender)
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.Nationality
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.InsurancePay
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.MonthlyBenefits
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.StartWorkingDate?.ToString("yyyy/MM/dd")
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.EndWorkingDate?.ToString("yyyy/MM/dd")
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.MonthlyWagesAndBenefitsIncluded
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.IncludedAndNotIncluded
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.EmployerShareInsurance
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.UnemploymentInsurance
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @attendance.BirthPlace
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-sm">
                                @(String.Format("{0:N10}", attendance.Insurance30Percent))
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="btn-group">
                            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                @localizer["Actions"]
                            </button>
                            <div class="dropdown-menu shadow animated--grow-in">
                                <a asp-area="Admin" asp-controller="attendance" asp-action="Delete" asp-route-attendanceId="@attendance.ImportedId" class="dropdown-item">
                                    <i class="fa fa-pencil"></i> @localizer["Delete"]
                                </a>
                            </div>
                        </div>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
<div class="row mr-2">
    <button class="btn btn-outline-success m-1" @(Model.PageNumber != 0 ? "" : "disabled") onclick="page = page - 1;loadData($('#year').val(),$('#month').val(),$('#key').val())">قبلی</button>

    <button class="btn btn-outline-success m-1" @(Model.PageCount != Model.PageNumber? "": "disabled") onclick="page = page + 1;loadData($('#year').val(),$('#month').val(),$('#key').val())">بعدی</button>

</div>
<script>
    //$("#attendanceTable").DataTable();
      $("#attendanceTable").DataTable({
        searching: false,
        ordering:  true,
        processing: true,
        select: true,
        responsive: true,
        bPaginate: false,
        aaSorting: [[ 0, "desc" ]],
        oLanguage : {
            sSearch: "جستجو: ",
            sInfo: "نمایش _START_ تا _END_ از @Model.DataCount رکورد |  @(Model.PageNumber + 1) از @(Model.PageCount + 1) صفحه",
            sLengthMenu: "نمایش _MENU_ رکورد",
            sInfoFiltered: "فیلتر شده از _MAX_ رکورد",
            sInfoEmpty  : "هیچ داده ای یافت نشد",
            sZeroRecords: "رکوردی یافت نشد",
            oPaginate:{
                sPrevious: "قبلی",
                sNext: "بعدی",
            }
        },
        //columns: [
        //    { width: "80%" }
        //],
        fixedColumns: false
    });
    $('[data-toggle="tooltip"]').tooltip()
</script>